
管理信息结构(SMI)是ASN.1的改编子集，在简单网络管理协议(SNMP)中运行，以定义管理信息库(MIB)中相关管理对象的集合("模块")。

SMI细分为三个部分。

- 模块定义
- 对象定义。
- 通知定义（也就是 "陷阱"）。

模块定义在描述信息模块时使用。ASN .1 宏 MODULE-IDENTITY 用于简明扼要地表达信息模块的语义。

对象定义描述管理对象。ASN.1 宏 OBJECT-TYPE 用于简明扼要地传达管理对象的语法和语义。

通知定义在描述管理信息的非调用传输时使用。ASN.1 宏 NOTIFICATION-TYPE 简明地传达了通知的语法和语义。

注：https://blog.paessler.com/snmp-deep-dive-how-smi-contributes-to-snmp


∮∮独立的必要性∮

你肯定还记得，SNMP对话中的通信伙伴是

    管理实体和
    被管理的设备。

它们通过网络通过SNMP发送和接收包含管理信息的消息，无论涉及什么操作系统、编程语言和编译器。

显然，独立性是你需要实现的。要独立于操作系统、编程语言和其他各种产生差异的组件。SNMP如何变得自由？

## 答案是

结构! 更准确的说，是一种普遍理解的标准化结构，即SMI(管理信息结构的缩写)。

首先，这包括你在使用SNMP时的数据类型结构，换句话说，就是对整数、字符串、OID等的描述定义。

其次，你需要一个二进制的映射结构来表达这些数据类型的情况，也就是说，你需要规则来说明如何在网络中传输这些数据类型。

由于有了这些定义，格式变得清晰而独立。而且由于格式是一个已知的标准，所以你网络中的任何一台机器都可以接收并 "理解"一个给定的SNMP管理信息，然后决定如何以与其架构相对应的格式存储这些信息。当然，这些原则也适用于SNMP通信的发送部分。

## SMI - 管理信息的结构

请记住，要想让管理信息结构产生独立性，我们需要定义以下内容

    使用的数据类型，以及
    适用于信息传输的规则。

SMI数据类型的定义来源于ASN.1（抽象语法符号一）。我们在这里只能涵盖ASN.1的一个非常小的、简单的子集。如果你想了解更多的内容，请查看，例如，ASN.1相关的ISO/OSI资料。

ASN.1/SMI的数据类型可以分为两类:

    简单或基本
    复杂或更高层次 

让我们看看这两种数据类型的一个例子。

## 基本数据类型


在与SNMP打交道的时候，有一种基本的数据类型你一定听说过。它就是 OBJECT IDENTIFIER，即 OID。最常见的记法是数字序列，例如

    1.3.6.1.2.1.2

这个OID包括了各自OID树节点的名称，如果你注意到它是ASN.1中定义的（你可以在下表中找到更多关于OBJECT IDENTIFIER的实际定义）。

    {iso(1) identified-organization(3) dod(6) internet(1) mgmt(2) mib-2(1)}。

RFC-2578中共定义了11种SMI MIB模块的基本数据类型。

    INTEGER
    Integer32
    Unsigned32
    OCTET STRING
    OBJECT IDENTIFIER
    IpAddress
    Counter32
    Counter64
    Gauge32
    TimeTicks
    Opaque
    
 下面是对一些数据类型描述的深入了解。

    数据类型描述
    INTEGER 32位整数，其值介于-2^31和2^31-1（含）之间，或从可能的命名常量值列表中取值。
    OCTET STRING 字节串，代表任意二进制或文本数据，最长65,535字节。
    OBJECT IDENTIFIER 它的值是一个非负数的有序列表，每个列表称为一个子标识符。最大是128个子标识符（tuple），每个子标识符的最大值为2^31-1。
    不透明的未解释的ASN.1值，需要向后兼容。

然而，这些并不是唯一的基本数据类型，互联网中还有很多数据类型。

## 更高级别的结构

还记得SNMP最重要的标准MIB模块之一MIB-2吗？它的一个子MIB模块是Interfaces-MIB文件（也很好地称为IF-MIB）。你可以在RFC 1213中找到它。其中，它包含ifPhysAddress条目，这是一个上层构造OBJECT-TYPE的实例，用于指定一个管理对象的数据类型、状态和语义，在这种情况下，就是接口的物理地址。